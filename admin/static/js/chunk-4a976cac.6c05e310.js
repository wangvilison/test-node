(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a976cac"],{"2f21":function(t,e,a){"use strict";var i=a("79e5");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d8e8"),l=a("4bf8"),o=a("79e5"),r=[].sort,s=[1,2,3];i(i.P+i.F*(o((function(){s.sort(void 0)}))||!o((function(){s.sort(null)}))||!a("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(l(this)):r.call(l(this),n(t))}})},aba7:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return o}));var i=a("b775"),n=function(t){return i["a"].get("/portrait/admin/tree",t)},l=function(t){return i["a"].post("/portrait/admin/save",t)},o=function(t){return i["a"].get("/portrait/admin/delete",{params:t})}},bf12:function(t,e,a){"use strict";var i=a("e616"),n=a.n(i);n.a},dc51:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu-manage-container"},[a("div",{staticClass:"btn-adduser"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.create}},[t._v("创建菜单")])],1),t._v(" "),a("div",{staticClass:"user-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listData.loading,expression:"listData.loading"}],staticStyle:{width:"100%"},attrs:{data:t.listData.dataSource,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{prop:"menuName",label:"菜单名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"menuDesc",label:"菜单描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"排序号"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,n=e.$index;return[a("div",{staticClass:"btn-operate"},[a("i",{class:["el-icon-circle-plus",2===i.level?"noCreate":""],on:{click:function(e){return t.onTableCreate(i,e)}}}),t._v(" "),a("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.onTablEdit(i,n)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.onTabelDelete(i)}}})])]}}])})],1)],1),t._v(" "),a("alert",{ref:"aaa",attrs:{visible:t.dialogVisible,top:"10vh",width:"800px",title:"创建菜单",loading:t.alertLoading},on:{"update:visible":function(e){t.dialogVisible=e},change:t.confirm}},[a("div",{staticClass:"add-box-dialog",attrs:{slot:"content"},slot:"content"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.formData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"父级ID：",prop:"pid"}},[a("el-input",{attrs:{type:"text",placeholder:"父级ID(可选)"},model:{value:t.formData.pid,callback:function(e){t.$set(t.formData,"pid",e)},expression:"formData.pid"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单名称：",prop:"menuName"}},[a("el-input",{attrs:{type:"text",placeholder:"菜单名称"},model:{value:t.formData.menuName,callback:function(e){t.$set(t.formData,"menuName",e)},expression:"formData.menuName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单排序：",prop:"sort"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入排序值,从小到大排列"},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"路由名称：",prop:"menuDesc"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入路由名称(Router.name)"},model:{value:t.formData.menuDesc,callback:function(e){t.$set(t.formData,"menuDesc",e)},expression:"formData.menuDesc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"路由路径：",prop:"url"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入路由url(Router.path)"},model:{value:t.formData.url,callback:function(e){t.$set(t.formData,"url",e)},expression:"formData.url"}})],1)],1)],1)])],1)},n=[],l=(a("55dd"),a("2dc0")),o=a("aba7"),r={name:"MenuManage",components:{alert:l["a"]},data:function(){return{name:"用户管理",formData:{id:"",menuName:"",menuDesc:"",pid:"",url:"",sort:"",level:"",isShow:!0},rules:{menuName:{required:!0,message:"请输入菜单名称"},menuDesc:{required:!0,message:"请输入路由名称"},sort:{required:!0,message:"请输入排序值"},url:{required:!0,message:"请输入路由路径"}},dialogVisible:!1,listData:{dataSource:[],loading:!1},alertLoading:!1}},mounted:function(){this.getMenuListData()},methods:{getMenuListData:function(){var t=this;this.listData.loading=!0,Object(o["c"])(this.listData.pagination).then((function(e){t.listData.pagination={total:e.data.total,pageNum:e.data.pageNum,pageSize:e.data.pageSize},t.listData.dataSource=e.data})).finally((function(e){t.listData.loading=!1}))},onTablEdit:function(t){var e=this;this.dialogVisible=!this.dialogVisible,this.$nextTick((function(){e.$refs.ruleForm.resetFields();var a=t.id,i=t.menuName,n=t.menuDesc,l=t.pid,o=t.url,r=t.sort,s=t.level,u=t.isShow;e.formData={id:a,menuName:i,menuDesc:n,pid:l,url:o,sort:r,level:s,isShow:u}}))},resetForm:function(t){var e=this;this.$nextTick((function(){e.$refs.ruleForm.resetFields(),t&&t()}))},onTableCreate:function(t,e){var a=this;console.log(e),this.dialogVisible=!this.dialogVisible,this.resetForm((function(){a.formData.id=null,a.formData.pid=t.id,a.formData.level=t.level+1}))},create:function(){var t=this;this.dialogVisible=!this.dialogVisible,this.resetForm((function(){t.formData.id="",t.formData.pid="",t.formData.level=0}))},onTabelDelete:function(t){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.listData.loading=!0,Object(o["b"])({id:t.id}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getMenuListData()})).finally((function(t){e.listData.loading=!1}))}))},confirm:function(t){var e=this;this.$refs.ruleForm.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.formData.menuCode=e.formData.menuDesc,e.alertLoading=!0,Object(o["a"])(e.formData).then((function(t){e.$message.success("操作成功"),e.getMenuListData(),e.dialogVisible=!1})).finally((function(t){e.alertLoading=!1}))}))}}},s=r,u=(a("bf12"),a("2877")),c=Object(u["a"])(s,i,n,!1,null,"7c39dabb",null);e["default"]=c.exports},e616:function(t,e,a){}}]);