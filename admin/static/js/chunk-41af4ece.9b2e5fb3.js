(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41af4ece"],{"00d87":function(t,e){(function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&a.rotl(t,8)|4278255360&a.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=a.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],a=0,n=0;a<t.length;a++,n+=8)e[n>>>5]|=t[a]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],a=0;a<32*t.length;a+=8)e.push(t[a>>>5]>>>24-a%32&255);return e},bytesToHex:function(t){for(var e=[],a=0;a<t.length;a++)e.push((t[a]>>>4).toString(16)),e.push((15&t[a]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],a=0;a<t.length;a+=2)e.push(parseInt(t.substr(a,2),16));return e},bytesToBase64:function(t){for(var a=[],n=0;n<t.length;n+=3)for(var r=t[n]<<16|t[n+1]<<8|t[n+2],o=0;o<4;o++)8*n+6*o<=8*t.length?a.push(e.charAt(r>>>6*(3-o)&63)):a.push("=");return a.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var a=[],n=0,r=0;n<t.length;r=++n%4)0!=r&&a.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(t.charAt(n))>>>6-2*r);return a}};t.exports=a})()},"3a70":function(t,e,a){},"456d":function(t,e,a){var n=a("4bf8"),r=a("0d58");a("5eda")("keys",(function(){return function(t){return r(n(t))}}))},"5eda":function(t,e,a){var n=a("5ca1"),r=a("8378"),o=a("79e5");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],i={};i[t]=e(a),n(n.S+n.F*o((function(){a(1)})),"Object",i)}},"6821f":function(t,e,a){(function(){var e=a("00d87"),n=a("9a63").utf8,r=a("8349"),o=a("9a63").bin,i=function(t,a){t.constructor==String?t=a&&"binary"===a.encoding?o.stringToBytes(t):n.stringToBytes(t):r(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var s=e.bytesToWords(t),l=8*t.length,u=1732584193,c=-271733879,f=-1732584194,d=271733878,p=0;p<s.length;p++)s[p]=16711935&(s[p]<<8|s[p]>>>24)|4278255360&(s[p]<<24|s[p]>>>8);s[l>>>5]|=128<<l%32,s[14+(l+64>>>9<<4)]=l;var m=i._ff,g=i._gg,h=i._hh,b=i._ii;for(p=0;p<s.length;p+=16){var v=u,D=c,y=f,w=d;u=m(u,c,f,d,s[p+0],7,-680876936),d=m(d,u,c,f,s[p+1],12,-389564586),f=m(f,d,u,c,s[p+2],17,606105819),c=m(c,f,d,u,s[p+3],22,-1044525330),u=m(u,c,f,d,s[p+4],7,-176418897),d=m(d,u,c,f,s[p+5],12,1200080426),f=m(f,d,u,c,s[p+6],17,-1473231341),c=m(c,f,d,u,s[p+7],22,-45705983),u=m(u,c,f,d,s[p+8],7,1770035416),d=m(d,u,c,f,s[p+9],12,-1958414417),f=m(f,d,u,c,s[p+10],17,-42063),c=m(c,f,d,u,s[p+11],22,-1990404162),u=m(u,c,f,d,s[p+12],7,1804603682),d=m(d,u,c,f,s[p+13],12,-40341101),f=m(f,d,u,c,s[p+14],17,-1502002290),c=m(c,f,d,u,s[p+15],22,1236535329),u=g(u,c,f,d,s[p+1],5,-165796510),d=g(d,u,c,f,s[p+6],9,-1069501632),f=g(f,d,u,c,s[p+11],14,643717713),c=g(c,f,d,u,s[p+0],20,-373897302),u=g(u,c,f,d,s[p+5],5,-701558691),d=g(d,u,c,f,s[p+10],9,38016083),f=g(f,d,u,c,s[p+15],14,-660478335),c=g(c,f,d,u,s[p+4],20,-405537848),u=g(u,c,f,d,s[p+9],5,568446438),d=g(d,u,c,f,s[p+14],9,-1019803690),f=g(f,d,u,c,s[p+3],14,-187363961),c=g(c,f,d,u,s[p+8],20,1163531501),u=g(u,c,f,d,s[p+13],5,-1444681467),d=g(d,u,c,f,s[p+2],9,-51403784),f=g(f,d,u,c,s[p+7],14,1735328473),c=g(c,f,d,u,s[p+12],20,-1926607734),u=h(u,c,f,d,s[p+5],4,-378558),d=h(d,u,c,f,s[p+8],11,-2022574463),f=h(f,d,u,c,s[p+11],16,1839030562),c=h(c,f,d,u,s[p+14],23,-35309556),u=h(u,c,f,d,s[p+1],4,-1530992060),d=h(d,u,c,f,s[p+4],11,1272893353),f=h(f,d,u,c,s[p+7],16,-155497632),c=h(c,f,d,u,s[p+10],23,-1094730640),u=h(u,c,f,d,s[p+13],4,681279174),d=h(d,u,c,f,s[p+0],11,-358537222),f=h(f,d,u,c,s[p+3],16,-722521979),c=h(c,f,d,u,s[p+6],23,76029189),u=h(u,c,f,d,s[p+9],4,-640364487),d=h(d,u,c,f,s[p+12],11,-421815835),f=h(f,d,u,c,s[p+15],16,530742520),c=h(c,f,d,u,s[p+2],23,-995338651),u=b(u,c,f,d,s[p+0],6,-198630844),d=b(d,u,c,f,s[p+7],10,1126891415),f=b(f,d,u,c,s[p+14],15,-1416354905),c=b(c,f,d,u,s[p+5],21,-57434055),u=b(u,c,f,d,s[p+12],6,1700485571),d=b(d,u,c,f,s[p+3],10,-1894986606),f=b(f,d,u,c,s[p+10],15,-1051523),c=b(c,f,d,u,s[p+1],21,-2054922799),u=b(u,c,f,d,s[p+8],6,1873313359),d=b(d,u,c,f,s[p+15],10,-30611744),f=b(f,d,u,c,s[p+6],15,-1560198380),c=b(c,f,d,u,s[p+13],21,1309151649),u=b(u,c,f,d,s[p+4],6,-145523070),d=b(d,u,c,f,s[p+11],10,-1120210379),f=b(f,d,u,c,s[p+2],15,718787259),c=b(c,f,d,u,s[p+9],21,-343485551),u=u+v>>>0,c=c+D>>>0,f=f+y>>>0,d=d+w>>>0}return e.endian([u,c,f,d])};i._ff=function(t,e,a,n,r,o,i){var s=t+(e&a|~e&n)+(r>>>0)+i;return(s<<o|s>>>32-o)+e},i._gg=function(t,e,a,n,r,o,i){var s=t+(e&n|a&~n)+(r>>>0)+i;return(s<<o|s>>>32-o)+e},i._hh=function(t,e,a,n,r,o,i){var s=t+(e^a^n)+(r>>>0)+i;return(s<<o|s>>>32-o)+e},i._ii=function(t,e,a,n,r,o,i){var s=t+(a^(e|~n))+(r>>>0)+i;return(s<<o|s>>>32-o)+e},i._blocksize=16,i._digestsize=16,t.exports=function(t,a){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var n=e.wordsToBytes(i(t,a));return a&&a.asBytes?n:a&&a.asString?o.bytesToString(n):e.bytesToHex(n)}})()},8349:function(t,e){function a(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&a(t.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(a(t)||n(t)||!!t._isBuffer)}},9271:function(t,e,a){"use strict";var n=a("3a70"),r=a.n(n);r.a},"9a63":function(t,e){var a={utf8:{stringToBytes:function(t){return a.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(a.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],a=0;a<t.length;a++)e.push(255&t.charCodeAt(a));return e},bytesToString:function(t){for(var e=[],a=0;a<t.length;a++)e.push(String.fromCharCode(t[a]));return e.join("")}}};t.exports=a},ad07:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-manage-container"},[a("div",{staticClass:"btn-adduser"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:t.onCreate}},[t._v("创建用户")])],1),t._v(" "),a("AiTable",{attrs:{"table-data":t.listData,pagination:t.listData.pagination},on:{onPaginationChange:t.onChildPageChange}},[a("el-table",{staticStyle:{width:"100%"},attrs:{slot:"table",data:t.listData.dataSource},slot:"table"},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户账号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"password",label:"用户密码"}}),t._v(" "),a("el-table-column",{attrs:{label:"用户类型"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._l(t.userTypeOption,(function(e){return[e.value===n.roleId?a("span",{key:e.value},[t._v(t._s(e.label))]):t._e()]}))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"用户状态"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("el-switch",{attrs:{"inactive-color":"#ddd","active-value":"Y","inactive-value":"N"},on:{change:function(e){return t.onChangeStatus(n)}},model:{value:n.status,callback:function(e){t.$set(n,"status",e)},expression:"row.status"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间",width:"180px"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("div",{staticClass:"btn-operate"},[a("i",{staticClass:"el-icon-edit",on:{click:function(e){return t.onTableEdit(n)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.onTableDelete(n)}}})])]}}])})],1)],1),t._v(" "),a("CreateAndEdit",{ref:"createAndEdit",attrs:{row:t.createAndEditData,visible:t.dialogVisible,"user-type-option":t.userTypeOption,"get-list-data":t.getListData},on:{"update:visible":function(e){t.dialogVisible=e}}})],1)},r=[],o=a("b775"),i=function(t){return o["a"].post("/portrait/admin/user/userList",t)},s=function(t){return o["a"].post("/portrait/admin/user/saveUser",t)},l=function(t){return o["a"].post("/portrait/admin/user/deleteUser",t)},u=a("b163"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableData.loading,expression:"tableData.loading"}],staticClass:"user-table ai-table"},[t._t("table"),t._v(" "),t._t("pagination",[a("el-pagination",{staticClass:"ai-pagination",attrs:{background:"",layout:"total, prev, pager, next, jumper",total:t.pagination.total,"page-size":t.pagination.pageSize,"current-page":t.pagination.pageNum},on:{"update:currentPage":function(e){return t.$set(t.pagination,"pageNum",e)},"update:current-page":function(e){return t.$set(t.pagination,"pageNum",e)},"current-change":t.onPaginationChange}})])],2)},f=[],d={name:"AiTablePagination",props:{tableData:{type:Object,default:function(){}},pagination:{type:Object,default:function(){return{pageNum:1,total:0,pageSize:10}}}},methods:{onPaginationChange:function(t){console.log(this.pagination),this.$emit("onPaginationChange",t)}}},p=d,m=a("2877"),g=Object(m["a"])(p,c,f,!1,null,null,null),h=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Alert",{attrs:{visible:t.alertVisible,top:"10vh",width:"800px",title:t.title,loading:t.alertLoading},on:{"update:visible":function(e){t.alertVisible=e},change:t.confirm}},[a("div",{staticClass:"add-box-dialog",attrs:{slot:"content"},slot:"content"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.formData,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户姓名：",prop:"nickname"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入用户姓名"},model:{value:t.formData.nickname,callback:function(e){t.$set(t.formData,"nickname",e)},expression:"formData.nickname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户账号：",prop:"userName"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入用户账号"},model:{value:t.formData.userName,callback:function(e){t.$set(t.formData,"userName",e)},expression:"formData.userName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户密码：",prop:"password"}},[a("el-input",{attrs:{type:"text",placeholder:"请输入用户密码"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户类型：",prop:"newRoleId"}},[a("el-select",{attrs:{placeholder:"请选择用户类型"},model:{value:t.formData.newRoleId,callback:function(e){t.$set(t.formData,"newRoleId",e)},expression:"formData.newRoleId"}},t._l(t.userTypeOption,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"用户状态：",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择用户状态"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},[a("el-option",{attrs:{label:"启动",value:"Y"}}),t._v(" "),a("el-option",{attrs:{label:"停用",value:"N"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"用户头像",prop:"icon"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.formData.icon?a("img",{staticClass:"avatar",attrs:{src:t.formData.icon}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)])},v=[],D=a("db72"),y=(a("ac6a"),a("456d"),a("2dc0")),w=a("6821f"),_=a.n(w),C={name:"CreatEdit",components:{Alert:y["a"]},props:{visible:{type:Boolean,default:!1},userTypeOption:{type:Array,default:function(){return[]}},row:{type:Object,default:function(){return{}}},getListData:{type:Function,default:function(){}}},data:function(){return{formData:{nickname:"",id:null,userName:"",password:"",status:"Y",newRoleId:"",icon:""},rules:{userName:{required:!0,message:"请输入用户账号"},nickname:{required:!0,message:"请输入用户昵称"}},alertLoading:!1}},computed:{isCreate:function(){return!this.formData.id},title:function(){return this.isCreate?"新建用户":"编辑用户"},alertVisible:{set:function(t){this.$emit("update:visible",t)},get:function(){return this.visible}}},watch:{row:function(t){var e=this;this.resetFormData((function(){Object.keys(t).length&&(e.formData.nickname=t.nickname,e.formData.userName=t.userName,e.formData.password="",e.formData.status=t.status,e.formData.newRoleId=t.roleId,e.formData.oldRoleId=t.roleId,e.formData.icon=t.icon,e.formData.id=t.id)}))}},methods:{resetFormData:function(t){var e=this;this.$nextTick((function(){e.$refs.ruleForm.resetFields(),t&&t(),console.log("resetFormData",e.formData)}))},handleAvatarSuccess:function(t,e){console.log("upload",t),this.formData.icon=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a="image/png"===t.type,n=t.size/1024/1024<2;return e||a||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),(e||a)&&n},addUser:function(){this.formData.id=null,this.resetFormData()},confirm:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.alertLoading=!0;var a=Object(D["a"])({},t.formData);t.formData.password&&(a.password=_()(t.formData.password)),s(a).then((function(e){t.$message.success("操作成功"),t.$emit("update:visible",!1),t.getListData()})).finally((function(e){t.alertLoading=!1}))}))},onTableEdit:function(t){var e=this;console.log(t),this.resetFormData((function(){e.formData.nickname=t.nickname||"无",e.formData.userName=t.userName,e.formData.password="",e.formData.status=t.status,e.formData.newRoleId=t.roleId,e.formData.oldRoleId=t.roleId,e.formData.icon=t.icon,e.formData.id=t.id,console.log("this.form",e.formData)}))}}},T=C,k=(a("9271"),Object(m["a"])(T,b,v,!1,null,"95769a34",null)),x=k.exports,S={name:"UserManage",components:{CreateAndEdit:x,AiTable:h},data:function(){return{name:"用户管理",dialogVisible:!1,userTypeOption:[],listData:{dataSource:[],loading:!1,pagination:{total:0,pageNum:1,pageSize:10}},alertLoading:!1,createAndEditData:{}}},computed:{},mounted:function(){this.getRoleData(),this.getListData()},methods:{getRoleData:function(){var t=this;Object(u["d"])().then((function(e){t.userTypeOption=e.data.list.map((function(t){return{label:t.roleName,value:t.id}}))}))},onChildPageChange:function(t){this.listData.pagination.pageNum=t,this.getListData()},getListData:function(){var t=this;this.listData.loading=!0,i(this.listData.pagination).then((function(e){t.listData.pagination={total:e.data.total,pageNum:e.data.pageNum,pageSize:e.data.pageSize},t.listData.dataSource=e.data.list})).finally((function(e){t.listData.loading=!1}))},onChangeUserStatus:function(t){this.createAndEditData=t,this.$refs.createAndEdit.onDelete(t)},onTableEdit:function(t){this.createAndEditData=t,this.dialogVisible=!0},onTableDelete:function(t){var e=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.listData.loading=!0,l({userId:t.id}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getListData()})).finally((function(t){e.listData.loading=!1}))}))},onChangeStatus:function(t){var e=this;this.listData.loading=!0;var a=t;a.newRoleId=t.roleId,a.oldRoleId=t.roleId,s(a).catch((function(){t.status="Y"===t.status?"N":"Y"})).finally((function(t){e.listData.loading=!1}))},onCreate:function(){this.createAndEditData={},this.dialogVisible=!0}}},A=S,N=Object(m["a"])(A,n,r,!1,null,"67bdbe44",null);e["default"]=N.exports},b163:function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return s}));var n=a("b775"),r=function(t){return n["a"].get("/portrait/admin/user/roleList",t)},o=function(t){return n["a"].post("/portrait/admin/user/saveRole",t)},i=function(t){return n["a"].get("/portrait/admin/user/delete",{params:t})},s=function(t){return n["a"].get("/portrait/admin/user/rolePermissionList",{params:t})}}}]);