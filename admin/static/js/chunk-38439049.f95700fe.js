(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38439049"],{3815:function(t,e,i){},"498a":function(t,e,i){"use strict";var a=i("9fab"),n=i.n(a);n.a},"605b":function(t,e,i){"use strict";var a=i("3815"),n=i.n(a);n.a},7130:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tag-group-container"},[i("alert",{attrs:{visible:t.editVisible,width:"900px",title:"修改动态标签规则"},on:{"update:visible":function(e){t.editVisible=e}}},[i("div",{staticClass:"edit-box",attrs:{slot:"content"},slot:"content"},[i("div",[t._v('动态标签"'+t._s(t.editData.title)+'"的规则满足以下条件：')]),t._v(" "),i("div",{staticClass:"edit-box-children"},[i("div",[i("div",{staticClass:"edit-dot-box"},[1!==t.editFormDataLength?i("div",{staticClass:"edit-link"}):t._e(),t._v(" "),1!==t.editFormDataLength?i("div",{staticClass:"edit-link-2"}):t._e(),t._v(" "),i("div",{staticClass:"edit-link edit-link-max el-icon-plus",on:{click:t.onAddRule}})]),t._v(" "),t.editFormDataLength>1?i("div",{staticClass:"edit-font-box"},t._l(t.ruleContinue,(function(e,a){return i("div",{key:a,staticClass:"edit-link-font",class:{"edit-link-font2":a>0},on:{click:function(i){return t.onChangeRuleContinue(e.ruleContinue,a)}}},[t._v(t._s(e.ruleContinue))])})),0):t._e()]),t._v(" "),i("div",t._l(t.editData.formData,(function(e,a){return i("div",{key:a,staticClass:"edit-select-box",class:{"last-child":a===t.editFormDataLength-1}},[i("el-select",{staticClass:"edit-select",attrs:{size:"medium",filterable:""},model:{value:e.parentCogetoryId,callback:function(i){t.$set(e,"parentCogetoryId",i)},expression:"item.parentCogetoryId"}},t._l(t.editData.selectOption,(function(t){return i("el-option",{key:t.id,attrs:{label:t.directoryName,value:t.id}})})),1),t._v(" "),i("el-select",{staticClass:"edit-select",attrs:{size:"medium"},model:{value:e.rule,callback:function(i){t.$set(e,"rule",i)},expression:"item.rule"}},[i("el-option",{attrs:{label:"小于",value:0}}),t._v(" "),i("el-option",{attrs:{label:"等于",value:1}}),t._v(" "),i("el-option",{attrs:{label:"大于",value:2}})],1),t._v(" "),i("el-input",{staticClass:"edit-select",attrs:{size:"medium"},model:{value:e.ruleValue,callback:function(i){t.$set(e,"ruleValue",i)},expression:"item.ruleValue"}}),t._v(" "),0!==a?i("i",{staticClass:"el-icon-remove edit-remove",on:{click:function(e){return t.onDeleteRule(a)}}}):t._e()],1)})),0)])])]),t._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"自定义标签"===t.activeName,expression:"activeName === '自定义标签'"}],staticClass:"add-group",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addDiyGroup()}}},[t._v("新建自定义分组")]),t._v(" "),i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"自定义标签",name:"自定义标签"}},[i("div",{staticClass:"tab-pane-box diytag-container"},[t._l(t.tagGrouplist,(function(e,a){return i("diy-tag-part",{key:a,attrs:{datas:e,index:a},on:{change:t.tagChange}})})),t._v(" "),i("alert",{attrs:{visible:t.dialogVisible,width:"598px",title:"新建自定义分组"},on:{"update:visible":function(e){t.dialogVisible=e},change:t.confirm}},[i("div",{staticClass:"add-box-dialog p-flex p-ai-c",attrs:{slot:"content"},slot:"content"},[i("span",[t._v("自定义分组名称：")]),t._v(" "),i("div",{staticClass:"input-name"},[i("el-input",{attrs:{placeholder:"请输入自定义分组名称"},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}})],1)])])],2)]),t._v(" "),i("el-tab-pane",{attrs:{label:"动态标签",name:"动态标签"}},[i("div",{staticClass:"tab-pane-box dynamictag-container"},t._l(t.tagGrouplist,(function(e,a){return i("diy-tag-part",{key:a,attrs:{datas:e,index:a},on:{change:t.tagChange,onTagClick:t.onChildTagClick}})})),1)])],1)],1)},n=[],s=(i("96cf"),i("3b8d")),l=i("75fc"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"diytag-part"},[i("div",{staticClass:"header-section p-flex p-ai-c"},[i("h3",{staticClass:"title"},[t._v(t._s(t.datas.directoryName))]),t._v(" "),i("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(e){return t.addTag()}}}),t._v(" "),i("i",{staticClass:"el-icon-edit"})]),t._v(" "),t._l(t.datas.childNode,(function(e,a){return i("div",{key:a,staticClass:"level2-box"},[i("div",{staticClass:"level2-title"},[t._v(t._s(" "+e.directoryName))]),t._v(" "),i("div",{staticClass:"tag-list p-flex p-ai-c p-jc-sb"},t._l(e.childNode,(function(e,n){return i("div",{key:n,staticClass:"tag-item"},[i("span",{staticClass:"tag",on:{click:function(i){return t.onTagClick(t.datas.childNode,e)}}},[t._v(t._s(e.value))]),t._v(" "),i("el-dropdown",{attrs:{trigger:"click"},on:{command:function(i){return t.checkItem(i,a,e)}}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-more tag-icon-rotate"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"重命名"}},[t._v("重命名")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"删除"}},[t._v("删除")])],1)],1)],1)})),0)])})),t._v(" "),i("alert",{attrs:{visible:t.dialogVisible,width:"598px",title:"新建标签"},on:{"update:visible":function(e){t.dialogVisible=e},change:t.confirm}},[i("div",{staticClass:"add-box-dialog p-flex p-ai-c",attrs:{slot:"content"},slot:"content"},[i("span",[t._v("标签名称：")]),t._v(" "),i("div",{staticClass:"input-name"},[i("el-input",{attrs:{placeholder:"请输入标签名称"},model:{value:t.tagName,callback:function(e){t.tagName=e},expression:"tagName"}})],1)])]),t._v(" "),i("el-dialog",{attrs:{width:"400px",top:"30vh",visible:t.removeVisible},on:{"update:visible":function(e){t.removeVisible=e}}},[i("div",{staticClass:"rm-dialog-title",attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"el-icon-warning"}),t._v(" "),i("span",[t._v("提示")])]),t._v(" "),i("div",{staticClass:"rm-text"},[t._v("确定要删除该标签")]),t._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.remove()}}},[t._v("确定")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.removeVisible=!1}}},[t._v("取消")])],1)])],2)},r=[],c=(i("c5f6"),i("2dc0")),u={components:{alert:c["a"]},props:{datas:{type:Object,default:function(){return{}}},index:{type:Number,default:0}},data:function(){return{dialogVisible:!1,dialogType:"新建标签",tagName:"",removeVisible:!1,tagIndex:-1}},methods:{addTag:function(){this.tagName="",this.dialogType="新建标签",this.dialogVisible=!this.dialogVisible},confirm:function(){this.$emit("change",this.dialogType,{row:this.datas,value:this.tagName,index:this.tagIndex}),this.dialogVisible=!this.dialogVisible},checkItem:function(t,e,i){this.tagIndex=e,"删除"===t?this.removeVisible=!this.removeVisible:(this.dialogType="重命名",this.tagName=i,this.dialogVisible=!this.dialogVisible)},onTagClick:function(t,e){this.$emit("onTagClick",{parent:t,tag:e})},remove:function(){this.$emit("change","删除",{row:this.datas,value:null,index:this.tagIndex}),this.removeVisible=!this.removeVisible}}},d=u,p=(i("498a"),i("2877")),v=Object(p["a"])(d,o,r,!1,null,"1d7927c5",null),g=v.exports,f=i("b775"),m=function(){return f["a"].get("/portrait/tree/selectTag")},h={name:"TagGroup",components:{diyTagPart:g,alert:c["a"]},data:function(){return{activeName:"动态标签",editData:{selectOption:[],title:"",formData:[{ruleContinue:"且",parentCogetoryId:"",rule:0,ruleValue:""}]},tagGrouplist:[],tagDynamiclist:[],dialogVisible:!1,editVisible:!1,groupName:""}},computed:{editFormDataLength:function(){return this.editData.formData.length},ruleContinue:function(){var t=Object(l["a"])(this.editData.formData);return t.shift(),t}},mounted:function(){this.getTagDiyList()},methods:{handleClick:function(){"自定义标签"===this.activeName?this.getTagDiyList():this.getDynamiclist()},onAddRule:function(){this.editData.formData.push({ruleContinue:"且",parentCogetoryId:"",rule:0,ruleValue:""})},onDeleteRule:function(t){this.editData.formData.splice(t,1)},getTagDiyList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:e=t.sent,console.log(e.data),this.tagGrouplist=e.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDynamiclist:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.tag.tagDiyGrouplist();case 2:e=t.sent,console.log(e.data),this.tagDynamiclist=e.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addDiyGroup:function(){this.dialogVisible=!0},confirm:function(){this.tagGrouplist.push({title:this.groupName,tags:[]}),this.dialogVisible=!this.dialogVisible,this.groupName=""},tagChange:function(t,e){var i=e.row,a=e.value,n=e.index;switch(t){case"新建标签":i.tags.push(a);break;case"重命名":i.tags.splice(n,1,a);break;case"删除":i.tags.splice(n,1);break}},onChildTagClick:function(t){this.editVisible=!0,this.editData.selectOption=t.parent,this.editData.title=t.tag.value},onChangeRuleContinue:function(t,e){this.editData.formData[e+1].ruleContinue="且"===t?"或":"且"}}},b=h,_=(i("605b"),Object(p["a"])(b,a,n,!1,null,"699bf6f5",null));e["default"]=_.exports},"9fab":function(t,e,i){},aa77:function(t,e,i){var a=i("5ca1"),n=i("be13"),s=i("79e5"),l=i("fdef"),o="["+l+"]",r="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(t,e,i){var n={},o=s((function(){return!!l[t]()||r[t]()!=r})),c=n[t]=o?e(p):l[t];i&&(n[i]=c),a(a.P+a.F*o,"String",n)},p=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},c5f6:function(t,e,i){"use strict";var a=i("7726"),n=i("69a8"),s=i("2d95"),l=i("5dbc"),o=i("6a99"),r=i("79e5"),c=i("9093").f,u=i("11e9").f,d=i("86cc").f,p=i("aa77").trim,v="Number",g=a[v],f=g,m=g.prototype,h=s(i("2aeb")(m))==v,b="trim"in String.prototype,_=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():p(e,3);var i,a,n,s=e.charCodeAt(0);if(43===s||45===s){if(i=e.charCodeAt(2),88===i||120===i)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+e}for(var l,r=e.slice(2),c=0,u=r.length;c<u;c++)if(l=r.charCodeAt(c),l<48||l>n)return NaN;return parseInt(r,a)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof g&&(h?r((function(){m.valueOf.call(i)})):s(i)!=v)?l(new f(_(e)),i,g):_(e)};for(var C,k=i("9e1e")?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;k.length>y;y++)n(f,C=k[y])&&!n(g,C)&&d(g,C,u(f,C));g.prototype=m,m.constructor=g,i("2aba")(a,v,g)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);